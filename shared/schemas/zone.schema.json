{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["zone_id", "name", "type", "points"],
  "properties": {
    "zone_id": {
      "type": "string",
      "description": "Unique zone identifier"
    },
    "name": {
      "type": "string",
      "description": "Human-readable zone name"
    },
    "type": {
      "type": "string",
      "enum": ["polygon", "tripwire"],
      "description": "Zone geometry type"
    },
    "points": {
      "type": "array",
      "items": {
        "type": "array",
        "items": {"type": "number"},
        "minItems": 2,
        "maxItems": 2
      },
      "description": "Array of [x, y] coordinate pairs"
    },
    "direction": {
      "type": ["string", "null"],
      "enum": ["AtoB", "BtoA", null],
      "description": "Tripwire crossing direction (null for polygon)"
    },
    "allowed_classes": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Classes allowed in this zone (empty = all)"
    },
    "min_size_px": {
      "type": "number",
      "minimum": 0,
      "default": 0,
      "description": "Minimum object size in pixels"
    },
    "dwell_sec": {
      "type": "number",
      "minimum": 0,
      "default": 0,
      "description": "Dwell time threshold in seconds"
    },
    "active_schedule": {
      "type": "object",
      "properties": {
        "days": {
          "type": "array",
          "items": {"type": "number", "minimum": 0, "maximum": 7},
          "description": "Days of week (0=Sunday, 1=Monday, etc.)"
        },
        "from": {
          "type": "string",
          "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Start time HH:MM"
        },
        "to": {
          "type": "string",
          "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",
          "description": "End time HH:MM"
        }
      }
    },
    "style": {
      "type": "object",
      "properties": {
        "stroke": {"type": "string", "default": "#ff0000"},
        "width": {"type": "number", "default": 2},
        "opacity": {"type": "number", "minimum": 0, "maximum": 1, "default": 0.6}
      }
    }
  }
}

